---
- name: maps
  hosts: all
  become: yes
  
  vars:
    remote_user: vagrant
    project_name: maps
    search_server: www.search.kartan.no
    project_dir: /home/{{remote_user}}/{{project_name}}
  # roles:
    # - 
    # - elasticsearch 
    # - node
  tasks:
  - name: apt get update
    apt: update_cache=yes
  - name: install basic requirements
    apt: name={{ item.name }} state=present
    with_items:
      - { name: 'build-essential' }
      - { name: 'python-apt' }
      - { name: 'git' }

  # - name: gdal repo
  #   apt_repository: repo='deb http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu trusty main' state=present

  # - name: gdal install
  #   apt: name=gdal-bin state=present
  - name: Download and unzip GDAL
    unarchive: src=http://download.osgeo.org/gdal/2.1.0/gdal-2.1.0.tar.gz dest=/home/{{ remote_user }} copy=no
  # - name: install gdal 2.1
    

#- name: Installing FFMPEG
  # - name: Running ./configure for GDAL
  #   command: '"{{ item }}" chdir=/myhome/ffmpeg-2.8.2/'
  #   with_items:
  #     - ./configure
  # - name: Running "make" for GDAL
  #   command: '"{{ item }}" chdir=/myhome/ffmpeg-2.8.2/'
  #   with_items:
  #     - make
  # - name: Running "make install" for GDAL
  #   command: 'make install chdir=/myhome/ffmpeg-2.8.2/'





  - name: install zlib
    apt: name=zlib1g-dev state=present
  - name: get ctb-tiler
    git: repo=https://github.com/geo-data/cesium-terrain-builder force=yes update=yes dest={{project_dir}}/cesium-terrain-builder accept_hostkey=True

  # 